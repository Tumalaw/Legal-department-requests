document.getElementById('taskForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent form submission
    
    const requestor = document.getElementById('requestor').value;
    const assignedTo = document.getElementById('assignedTo').value;
    const actionType = document.getElementById('actionType').value;
    const requestDate = document.getElementById('requestDate').value;
    const dueDate = document.getElementById('dueDate').value;
    const responseTime = document.getElementById('responseTime').value;
    const status = document.getElementById('status').value;
    
    // Get existing tasks from local storage
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    
    // Add new task to the array
    tasks.push({ requestor, assignedTo, actionType, requestDate, dueDate, responseTime, status });
    
    // Save tasks back to local storage
    localStorage.setItem('tasks', JSON.stringify(tasks));
    
    // Add task to the table
    const table = document.getElementById('taskTable').getElementsByTagName('tbody')[0];
    const newRow = table.insertRow();
    newRow.innerHTML = `
        <td>${requestor}</td>
        <td>${assignedTo}</td>
        <td>${actionType}</td>
        <td>${requestDate}</td>
        <td>${dueDate}</td>
        <td>${responseTime}</td>
        <td>${status}</td>
    `;
    
    this.reset(); // Clear the form after submission
});

// Load tasks from local storage when the page loads
window.onload = function() {
    const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    const table = document.getElementById('taskTable').getElementsByTagName('tbody')[0];
    
    tasks.forEach(task => {
        const newRow = table.insertRow();
        newRow.innerHTML = `
            <td>${task.requestor}</td>
            <td>${task.assignedTo}</td>
            <td>${task.actionType}</td>
            <td>${task.requestDate}</td>
            <td>${task.dueDate}</td>
            <td>${task.responseTime}</td>
            <td>${task.status}</td>
        `;
    });
};